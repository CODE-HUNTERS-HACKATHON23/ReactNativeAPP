import React, { useEffect } from 'react';
import { View, Text, Button } from 'react-native';
import * as Notifications from 'expo-notifications';
import LinearGradient from 'react-native-linear-gradient';

export default function App() {
  useEffect(() => {
    // Solicitar permisos para recibir notificaciones
    const requestNotificationPermission = async () => {
      const { status } = await Notifications.requestPermissionsAsync();
      if (status !== 'granted') {
        console.log('Permiso de notificación no concedido');
      }
    };

    requestNotificationPermission();

    // Registrar un canal de notificación
    const registerNotificationChannel = async () => {
      const channel = {
        name: 'My Notification Channel',
        importance: Notifications.AndroidImportance.DEFAULT,
        vibrationPattern: [0, 250, 250, 250],
      };

      await Notifications.setNotificationChannelAsync('default', channel);
    };

    registerNotificationChannel();
  }, []);

  const sendNotification = async () => {
    await Notifications.scheduleNotificationAsync({
      content: {
        title: 'Mi primera notificación',
        body: 'Esto es el cuerpo de la notificación',
      },
      trigger: {
        seconds: 10, // La notificación se enviará 10 segundos después de invocar esta función
      },
    });
  };

  return (
    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>
      <Text>Expo Notifications Example</Text>
      <Button title="Enviar Notificación" onPress={sendNotification} />
    </View>
  );
}
